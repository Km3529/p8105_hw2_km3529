---
title: "p8105_hw2_km3529"
author: Karina Myers
output: github_document
---

```{r setup}
library(tidyverse)
library(readxl)
```

## Problem 1

```{r Loading Mr. Trashwheel}
path_to_data = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx"
```

Read the Mr. Trashwheel dataset

```{r}
trashwheel_df = 
	read_xlsx(
		path = path_to_data,
		sheet = "Mr. Trash Wheel",
		range = cell_cols("A:N")) %>% 
	janitor::clean_names() %>% 
	drop_na(dumpster) %>% 
	mutate(
		sports_balls = round(sports_balls),
		sports_balls = as.integer(sports_balls)
	)
```


Read precipitation data for 2017 and 2018

```{r}
#setting up 2018
precip_2018 = 
	read_excel(
		"./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
		sheet = "2018 Precipitation",
		skip = 1
	) %>% 
	janitor::clean_names() %>% 
	drop_na(month) %>% 
	mutate(year = 2018) %>% 
	relocate(year)

#setting up 2017
precip_2017 = 
	read_excel(
		"./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
		sheet = "2017 Precipitation",
		skip = 1
	) %>% 
	janitor::clean_names() %>% 
	drop_na(month) %>% 
	mutate(year = 2017) %>% 
	relocate(year)
```

Combine precipitation datasets and converts month to a character variable 


```{r}
month_df = 
	tibble(
		month = 1:12,
		month_name = month.name
	)
precip_df = 
	bind_rows(precip_2018, precip_2017)
precip_df =
	left_join(precip_df, month_df, by = "month")
```

This dataset contains information from the Mr. Trashwheel trash collector in Baltimore, Maryland. As trash enters the inner harbor, the trashwheel collects that trash, and stores it in a dumpster. The dataset contains information on year, month, and trash collected, include some specific kinds of trash. There are a total of `r nrow(trashwheel_df)` rows in our final dataset. Additional data sheets include month precipitation data. In this dataset:

* The median number of sports balls found in a dumpster in 2017 was `r trashwheel_df %>% filter(year == 2017) %>% pull(sports_balls) %>% median()`
* The total precipitation in 2018 was `r precip_df %>% filter(year == 2018) %>% pull(total) %>% sum()` inches.

## Problem 2
Load NYC Transit Data 
```{r}
transit_df = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(
      entry = as.character(entry), 
      entry = replace(entry, entry == "YES", "TRUE"), 
        entry = replace(entry, entry == "NO", "FALSE"), 
      entry = as.logical(entry))
```

This dataset contains information on New York City subway system It includes data on station lines, station coordinates, entrance types, and ADA accessibility. It also includes which trains are on routes 1-11. 

THINGS TO DESCRIBE

After importing the data, the names of variables were converted to snake case. Certain variables such as ADA notes were dropped and only the variables of interest were included. Entry was then converted from a character variable to a logical variable. 

There are a total of `r nrow(transit_df)` rows and `r ncol(transit_df)`. 

The data are not tidy. EXPLAIN WHY


There are `r nrow(distinct(transit_df, station_name))` distinct stations. 


```{r ADA compliant}
filter(transit_df, ada == TRUE) %>% 
distinct(line, station_name) %>% 
count()

```


```{r Proportion of station entrances/exists without vending allow entrance}


a = filter(transit_df, vending != "YES" 
      & entry == TRUE) %>% 
  count()

b = filter(transit_df, vending != "YES") %>% 
  count()

a/b

```



```{r}
  
transit_tidy =
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
    col_types = "cccnnccccccccccccccccclclcccnncc") %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(
      entry = as.character(entry), 
      entry = replace(entry, entry == "YES", "TRUE"), 
        entry = replace(entry, entry == "NO", "FALSE"), 
      entry = as.logical(entry)) %>% 
  pivot_longer(
    route1:route11, 
    names_to = "route_name", 
    values_to = "route_number") %>% 
  drop_na(route_number)
 
```


how many stations serve the A train? 
How many of those are ADA compliant? 

```{r}
#how many serve the A train
filter(transit_tidy, route_number == "A") %>% 
  distinct(line, station_name) %>% 
  count()

#
filter(transit_tidy, 
      route_number == "A" &
        ada == TRUE) %>% 
  distinct(line, station_name) %>% 
  count()


```



## Problem 3

```{r}

```





